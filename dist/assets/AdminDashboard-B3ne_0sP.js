import{j as e,m as d,P as A,S as T,U as D,au as F,aq as C,a4 as z,q as I,av as R,aw as L,ag as Y,E as _,B as K,a as Q,ax as J,ay as V}from"./ui-CStX2XNU.js";import{r as p}from"./vendor-D5Lolgu6.js";import{a as W,d as x}from"./index-0L1wPOp8.js";import{j as g,h}from"./firebase-DdLFvxrj.js";const r=({title:i,value:n,change:a,changeType:t,icon:l,color:m,onClick:s})=>e.jsx(d.div,{whileHover:{scale:1.02,y:-2},className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 cursor-pointer",onClick:s,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:i}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:n}),a!==void 0&&e.jsxs("div",{className:`flex items-center mt-2 ${t==="increase"?"text-green-600":"text-red-600"}`,children:[t==="increase"?e.jsx(J,{className:"w-4 h-4 mr-1"}):e.jsx(V,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[a,"%"]}),e.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"son ay"})]})]}),e.jsx("div",{className:`p-3 rounded-xl ${m}`,children:e.jsx(l,{className:"w-6 h-6 text-white"})})]})}),X=({title:i,description:n,time:a,type:t})=>{const l=()=>{switch(t){case"order":return e.jsx(T,{className:"w-4 h-4"});case"user":return e.jsx(D,{className:"w-4 h-4"});case"product":return e.jsx(A,{className:"w-4 h-4"});case"message":return e.jsx(z,{className:"w-4 h-4"});default:return e.jsx(R,{className:"w-4 h-4"})}},m=()=>{switch(t){case"order":return"bg-green-100 text-green-600";case"user":return"bg-blue-100 text-blue-600";case"product":return"bg-purple-100 text-purple-600";case"message":return"bg-orange-100 text-orange-600";default:return"bg-gray-100 text-gray-600"}};return e.jsxs("div",{className:"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx("div",{className:`p-2 rounded-lg ${m()}`,children:l()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i}),e.jsx("p",{className:"text-sm text-gray-500",children:n}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:a})]})]})},u=({title:i,description:n,icon:a,color:t,onClick:l})=>e.jsxs(d.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,className:"p-4 bg-white rounded-xl shadow-lg border border-gray-100 text-left w-full hover:shadow-xl transition-all",children:[e.jsx("div",{className:`p-3 rounded-lg ${t} inline-flex mb-3`,children:e.jsx(a,{className:"w-5 h-5 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:i}),e.jsx("p",{className:"text-sm text-gray-600",children:n})]});function le(){const{currentUser:i,userRole:n,canManageProducts:a,canManageOrders:t}=W(),[l,m]=p.useState(!0),[s,U]=p.useState({totalProducts:0,totalOrders:0,totalUsers:0,totalRevenue:0,pendingOrders:0,messages:0,reviewsCount:0,subscribersCount:0}),[v,O]=p.useState([]),P=async()=>{try{m(!0);const b=(await g(h(x,"products"))).size,f=await g(h(x,"orders")),B=f.size;let S=0,k=0;const j=[];f.forEach(w=>{const c=w.data();c.total&&(S+=c.total),c.status==="pending"&&k++,j.length<5&&j.push({id:w.id,title:`Yeni Sipariş #${w.id.slice(-4)}`,description:`${c.total?.toFixed(2)||"0"}₺ - ${c.status||"pending"}`,time:c.createdAt?new Date(c.createdAt.seconds*1e3).toLocaleDateString("tr-TR"):"Bilinmiyor",type:"order"})});const H=(await g(h(x,"users"))).size,M=(await g(h(x,"contact_messages"))).size,q=(await g(h(x,"reviews"))).size,G=(await g(h(x,"newsletter_subscriptions"))).size;U({totalProducts:b,totalOrders:B,totalUsers:H,totalRevenue:S,pendingOrders:k,messages:M,reviewsCount:q,subscribersCount:G}),O(j)}catch(o){console.error("Dashboard data fetch error:",o)}finally{m(!1)}};p.useEffect(()=>{P()},[]);const $=()=>window.location.href="/admin/products",y=()=>window.location.href="/admin/orders",E=()=>window.location.href="/admin/users",N=()=>window.location.href="/admin/analytics";return l?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Dashboard yükleniyor..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",style:{paddingTop:"80px"},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Hoş geldiniz ",i?.email," • Role: ",n]})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(r,{title:"Toplam Ürün",value:s.totalProducts,change:12,changeType:"increase",icon:A,color:"bg-blue-500",onClick:$}),e.jsx(r,{title:"Toplam Sipariş",value:s.totalOrders,change:8,changeType:"increase",icon:T,color:"bg-green-500",onClick:y}),e.jsx(r,{title:"Toplam Kullanıcı",value:s.totalUsers,change:15,changeType:"increase",icon:D,color:"bg-purple-500",onClick:E}),e.jsx(r,{title:"Toplam Gelir",value:`${s.totalRevenue.toFixed(0)}₺`,change:22,changeType:"increase",icon:F,color:"bg-orange-500",onClick:N})]}),e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(r,{title:"Bekleyen Siparişler",value:s.pendingOrders,icon:C,color:"bg-yellow-500",onClick:y}),e.jsx(r,{title:"Mesajlar",value:s.messages,icon:z,color:"bg-red-500"}),e.jsx(r,{title:"Değerlendirmeler",value:s.reviewsCount,icon:I,color:"bg-indigo-500"}),e.jsx(r,{title:"Newsletter Aboneleri",value:s.subscribersCount,icon:R,color:"bg-pink-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(d.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"lg:col-span-2 bg-white rounded-2xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Son Aktiviteler"}),e.jsxs("button",{className:"text-blue-600 hover:text-blue-700 font-medium flex items-center",children:["Tümünü Gör ",e.jsx(L,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-2",children:v.length>0?v.map((o,b)=>e.jsx(X,{title:o.title,description:o.description,time:o.time,type:o.type},b)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Henüz aktivite bulunmuyor"})]})})]}),e.jsx(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Hızlı İşlemler"}),e.jsxs("div",{className:"space-y-4",children:[a()&&e.jsx(u,{title:"Yeni Ürün Ekle",description:"Mağazaya yeni ürün ekleyin",icon:Y,color:"bg-green-500",onClick:()=>window.location.href="/admin/products?action=add"}),t()&&e.jsx(u,{title:"Siparişleri Görüntüle",description:"Bekleyen siparişleri kontrol edin",icon:_,color:"bg-blue-500",onClick:y}),e.jsx(u,{title:"Analytics",description:"Satış raporlarını inceleyin",icon:K,color:"bg-purple-500",onClick:N}),e.jsx(u,{title:"Ayarlar",description:"Sistem ayarlarını düzenleyin",icon:Q,color:"bg-gray-500",onClick:()=>window.location.href="/admin/settings"})]})]})})]})]})})}export{le as default};
