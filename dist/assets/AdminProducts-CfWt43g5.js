import{j as e,m,ae as G,P as E,S as R,K as T,A as Y,n as K,as as B,E as I,at as H,ac as O,X as V,au as _}from"./ui-CgwqNMVA.js";import{r as n}from"./vendor-D5Lolgu6.js";import{c as D,q as M,f as U,b as $,d as X,h as F,p as J,t as Q}from"./firebase-trQ-gVpC.js";import{d as f}from"./index-pTkofpEK.js";const W=({product:t,onSave:p,onCancel:x,isEditing:o=!1})=>{const[r,l]=n.useState({name:"",category:"",ageGroup:"",price:"",originalPrice:"",description:"",image:"",tags:"",shopierLink:"",badge:"",rating:4.5,reviews:0,...t||{},tags:t?.tags?Array.isArray(t.tags)?t.tags.join(", "):t.tags:""}),[c,y]=n.useState(!1),j=["deney","eğitici","oyuncak","dekoratif"],d=["3-6","7-12","13+"],u=["","Yeni","Çok Satan","Trend","Popüler","Özel Seri"],b=async a=>{a.preventDefault(),y(!0);try{const g={...r,price:parseFloat(r.price),originalPrice:r.originalPrice?parseFloat(r.originalPrice):null,rating:parseFloat(r.rating),reviews:parseInt(r.reviews),tags:typeof r.tags=="string"&&r.tags.trim()?r.tags.split(",").map(h=>h.trim()).filter(Boolean):[],updatedAt:new Date};o||(g.createdAt=new Date),await p(g)}catch(g){console.error("Product save error:",g),alert("Ürün kaydedilirken hata oluştu!")}finally{y(!1)}};return e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(m.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?"Ürün Düzenle":"Yeni Ürün Ekle"}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(V,{className:"w-5 h-5"})})]})}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ürün Adı *"}),e.jsx("input",{type:"text",required:!0,value:r.name,onChange:a=>l({...r,name:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ürün adını giriniz"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori *"}),e.jsxs("select",{required:!0,value:r.category,onChange:a=>l({...r,category:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Kategori Seçin"}),j.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yaş Grubu *"}),e.jsxs("select",{required:!0,value:r.ageGroup,onChange:a=>l({...r,ageGroup:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Yaş Grubu Seçin"}),d.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fiyat (₺) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:r.price,onChange:a=>l({...r,price:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"199.99"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Eski Fiyat (₺)"}),e.jsx("input",{type:"number",step:"0.01",value:r.originalPrice||"",onChange:a=>l({...r,originalPrice:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"299.99"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Badge"}),e.jsx("select",{value:r.badge||"",onChange:a=>l({...r,badge:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:u.map(a=>e.jsx("option",{value:a,children:a||"Badge Yok"},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama *"}),e.jsx("textarea",{required:!0,rows:3,value:r.description,onChange:a=>l({...r,description:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ürün açıklamasını giriniz"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resim URL *"}),e.jsx("input",{type:"url",required:!0,value:r.image,onChange:a=>l({...r,image:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://images.unsplash.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etiketler (virgülle ayırın)"}),e.jsx("input",{type:"text",value:r.tags,onChange:a=>l({...r,tags:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"fizik, kimya, deney"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating (1-5)"}),e.jsx("input",{type:"number",min:"1",max:"5",step:"0.1",value:r.rating,onChange:a=>l({...r,rating:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yorum Sayısı"}),e.jsx("input",{type:"number",min:"0",value:r.reviews,onChange:a=>l({...r,reviews:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shopier Link"}),e.jsx("input",{type:"text",value:r.shopierLink||"",onChange:a=>l({...r,shopierLink:a.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"#SHOPIER_LINK_HERE"})]}),r.image&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resim Önizleme"}),e.jsx("img",{src:r.image,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg border border-gray-300",onError:a=>{a.target.style.display="none"}})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:x,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"İptal"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4"}),o?"Güncelle":"Kaydet"]})})]})]})]})})},Z=({product:t,onEdit:p,onDelete:x,onView:o})=>{const[r,l]=n.useState(!1);return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-12 h-12 object-cover rounded-lg mr-4",onError:c=>{c.target.src="https://via.placeholder.com/48x48?text=No+Image"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",t.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:t.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.ageGroup}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[t.originalPrice&&e.jsxs("span",{className:"text-gray-400 line-through mr-2",children:["₺",t.originalPrice.toFixed(2)]}),e.jsxs("span",{className:"font-semibold",children:["₺",t.price.toFixed(2)]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),t.rating," (",t.reviews,")"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.badge&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:t.badge})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>l(!r),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(B,{className:"w-4 h-4"})}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:[e.jsxs("button",{onClick:()=>{o(t),l(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Görüntüle"]}),e.jsxs("button",{onClick:()=>{p(t),l(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Düzenle"]}),e.jsxs("button",{onClick:()=>{x(t),l(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Sil"]})]})]})})]})};function te(){const[t,p]=n.useState([]),[x,o]=n.useState(!0),[r,l]=n.useState(""),[c,y]=n.useState(""),[j,d]=n.useState(!1),[u,b]=n.useState(null),[a,g]=n.useState({total:0,byCategory:{}}),h=async()=>{try{o(!0);const s=D(f,"products"),i=M(s,U("name","asc")),w=await $(i),N=[],k={};w.forEach(S=>{const C={id:S.id,...S.data()};N.push(C);const P=C.category;k[P]=(k[P]||0)+1}),p(N),g({total:N.length,byCategory:k})}catch(s){console.error("Error fetching products:",s),alert("Ürünler yüklenirken hata oluştu!")}finally{o(!1)}},z=async s=>{try{await X(D(f,"products"),s),d(!1),h(),alert("Ürün başarıyla eklendi!")}catch(i){throw console.error("Error adding product:",i),i}},L=async s=>{try{const i=F(f,"products",u.id);await J(i,s),b(null),d(!1),h(),alert("Ürün başarıyla güncellendi!")}catch(i){throw console.error("Error updating product:",i),i}},A=async s=>{if(window.confirm(`"${s.name}" ürününü silmek istediğinizden emin misiniz?`))try{await Q(F(f,"products",s.id)),h(),alert("Ürün başarıyla silindi!")}catch(i){console.error("Error deleting product:",i),alert("Ürün silinirken hata oluştu!")}},q=s=>{window.open(`/product/${s.id}`,"_blank")},v=t.filter(s=>{const i=s.name.toLowerCase().includes(r.toLowerCase())||s.description.toLowerCase().includes(r.toLowerCase()),w=!c||s.category===c;return i&&w});return n.useEffect(()=>{h()},[]),e.jsx("div",{className:"min-h-screen bg-gray-50",style:{paddingTop:"80px"},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ürün Yönetimi"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Toplam ",a.total," ürün • ",v.length," ürün görüntüleniyor"]})]}),e.jsxs(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),"Yeni Ürün Ekle"]})]}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Ürün"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.total})]}),e.jsx("div",{className:"p-3 rounded-xl bg-blue-500",children:e.jsx(E,{className:"w-6 h-6 text-white"})})]})}),Object.entries(a.byCategory).map(([s,i])=>e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 capitalize",children:s}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i})]}),e.jsx("div",{className:"p-3 rounded-xl bg-green-500",children:e.jsx(R,{className:"w-6 h-6 text-white"})})]})},s))]}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ürün ara...",value:r,onChange:s=>l(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"md:w-48",children:e.jsxs("select",{value:c,onChange:s=>y(s.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Tüm Kategoriler"}),e.jsx("option",{value:"deney",children:"Deney"}),e.jsx("option",{value:"eğitici",children:"Eğitici"}),e.jsx("option",{value:"oyuncak",children:"Oyuncak"}),e.jsx("option",{value:"dekoratif",children:"Dekoratif"})]})})]})}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:x?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-600"})}):v.length===0?e.jsxs("div",{className:"text-center p-12",children:[e.jsx(E,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ürün Bulunamadı"}),e.jsx("p",{className:"text-gray-600",children:"Arama kriterlerinize uygun ürün bulunamadı."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ürün"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kategori"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yaş Grubu"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fiyat"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(s=>e.jsx(Z,{product:s,onEdit:i=>{b(i),d(!0)},onDelete:A,onView:q},s.id))})]})})}),e.jsx(Y,{children:j&&e.jsx(W,{product:u,onSave:u?L:z,onCancel:()=>{d(!1),b(null)},isEditing:!!u})})]})})}export{te as default};
