import{j as e,m as a,C as v,a7 as I,b as k,q as R,a4 as A,A as S,a6 as B,O,a8 as w,a9 as L,aa as M,ab as P,ac as T,ad as E,ae as C,af as U}from"./ui-B2_iPpHp.js";import{u as K,r as d,R as z}from"./vendor-x2D2W7aw.js";import{u as Y}from"./index-ItyG17zO.js";import"./firebase-DlhFiCg4.js";const g={BILIM10:{discount:.1,description:"%10 İndirim"},YENİ15:{discount:.15,description:"%15 Yeni Müşteri İndirimi"},OGRENCI20:{discount:.2,description:"%20 Öğrenci İndirimi"},TOPLU25:{discount:.25,description:"%25 Toplu Alım İndirimi"}},V=s=>s>=500?0:s>=200?25:40,D=z.memo(({item:s,updateQuantity:i,removeItem:l,currentTheme:x})=>{const[p,c]=d.useState(!1),o=d.useCallback(async()=>{c(!0),setTimeout(()=>{l(s.id)},200)},[s.id,l]),m=d.useCallback(r=>{r<1?o():i(s.id,r)},[s.id,i,o]);return e.jsx(a.div,{layout:!0,initial:{opacity:0,x:-20},animate:{opacity:p?0:1,x:p?-100:0,scale:p?.8:1},exit:{opacity:0,x:-100,scale:.8},transition:{duration:.3},className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-6 hover:shadow-xl transition-all duration-300",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx(a.img,{src:s.image,alt:s.name,className:"w-24 h-24 object-cover rounded-xl shadow-md",whileHover:{scale:1.05}}),s.badge&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:s.badge})]}),e.jsxs("div",{className:"flex-grow space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 leading-tight pr-2",children:s.name}),e.jsx(a.button,{onClick:o,whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors","aria-label":"Ürünü kaldır",children:e.jsx(M,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-2xl font-bold",style:{color:x.primary},children:["₺",(s.price*s.quantity).toFixed(2)]}),s.quantity>1&&e.jsxs("p",{className:"text-sm text-gray-500",children:["₺",s.price.toFixed(2)," × ",s.quantity]})]}),e.jsxs("div",{className:"flex items-center bg-gray-50 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx(a.button,{onClick:()=>m(s.quantity-1),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-3 hover:bg-gray-100 rounded-l-xl transition-colors",disabled:s.quantity===1,children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx(a.span,{initial:{scale:1.2},animate:{scale:1},className:"px-4 py-3 font-bold text-lg min-w-[60px] text-center",children:s.quantity},s.quantity),e.jsx(a.button,{onClick:()=>m(s.quantity+1),whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-3 hover:bg-gray-100 rounded-r-xl transition-colors",children:e.jsx(T,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.category&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-600 rounded-full",children:s.category}),s.ageGroup&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-600 rounded-full",children:[s.ageGroup," yaş"]})]})]})]})})}),X=z.memo(({discountCode:s,setDiscountCode:i,discount:l,setDiscount:x,error:p,setError:c,currentTheme:o})=>{const[m,r]=d.useState([]),y=d.useCallback(()=>{const t=s.toUpperCase();if(g[t])x(g[t]),c(""),r([]);else{c("Geçersiz indirim kodu."),x({discount:0});const n=Object.keys(g);r(n.slice(0,2))}},[s,x,c]),b=d.useCallback(t=>{i(t),x(g[t]),c(""),r([])},[i,x,c]);return e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(E,{className:"w-5 h-5",style:{color:o.primary}}),e.jsx("h3",{className:"text-xl font-bold",style:{color:o.primary},children:"İndirim Kodu"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a.input,{type:"text",placeholder:"BILIM10, YENİ15...",value:s,onChange:t=>i(t.target.value.toUpperCase()),className:"flex-grow px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:outline-none transition-all",style:{borderColor:l.discount>0?"#10b981":o.primary+"30",focusRingColor:o.secondary},onKeyPress:t=>t.key==="Enter"&&y(),whileFocus:{scale:1.02}}),e.jsx(a.button,{onClick:y,whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-3 rounded-xl text-white shadow-lg transition-all",style:{backgroundColor:l.discount>0?"#10b981":o.primary},children:l.discount>0?e.jsx(C,{size:20}):e.jsx(k,{size:20})})]}),e.jsxs(S,{children:[p&&e.jsxs(a.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[e.jsx(U,{size:14})," ",p]}),m.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Deneyin:"}),m.map(t=>e.jsx("button",{onClick:()=>b(t),className:"text-xs px-2 py-1 bg-blue-100 text-blue-600 rounded-full hover:bg-blue-200 transition-colors",children:t},t))]})]}),l.discount>0&&e.jsxs(a.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-sm text-green-600 font-semibold flex items-center gap-1",children:[e.jsx(C,{size:14})," ",l.description," uygulandı!"]})]})]})]})});function W({onGoToCheckout:s,currentTheme:i}){const{cartItems:l,updateQuantity:x,removeItem:p}=Y(),c=K(),[o,m]=d.useState(""),[r,y]=d.useState({discount:0}),[b,t]=d.useState(""),n=d.useMemo(()=>{const h=l.reduce((j,u)=>j+u.price*u.quantity,0),N=h*r.discount,f=V(h),G=h-N+f,F=l.reduce((j,u)=>j+u.quantity,0);return{subtotal:h,discountAmount:N,shipping:f,total:G,itemCount:F}},[l,r.discount]),H={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},q={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}};return l.length===0?e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(a.header,{className:"bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50",initial:{y:-100},animate:{y:0},children:e.jsxs("nav",{className:"container mx-auto px-4 py-4 flex items-center gap-4",children:[e.jsx(a.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Geri dön",children:e.jsx(v,{className:"w-6 h-6",style:{color:i.primary}})}),e.jsx("h1",{className:"text-2xl font-bold",style:{color:i.primary},children:"Sepetim"})]})}),e.jsx("main",{className:"container mx-auto px-4 py-16",children:e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-center max-w-md mx-auto",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-8",children:e.jsx(I,{className:"w-16 h-16 text-gray-400"})}),e.jsx("h2",{className:"text-3xl font-bold mb-4",style:{color:i.primary},children:"Sepetiniz Boş"}),e.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Henüz sepetinize ürün eklemediniz. Bilimin büyüleyici dünyasından size uygun ürünleri keşfetmeye başlayın!"}),e.jsxs(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("/"),className:"px-8 py-4 rounded-2xl text-white font-semibold shadow-lg flex items-center gap-2 mx-auto",style:{backgroundColor:i.primary},children:[e.jsx(k,{className:"w-5 h-5"}),"Alışverişe Başla"]})]})})]}):e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[e.jsx(a.header,{className:"bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50",initial:{y:-100},animate:{y:0},children:e.jsxs("nav",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Geri dön",children:e.jsx(v,{className:"w-6 h-6",style:{color:i.primary}})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",style:{color:i.primary},children:"Sepetim"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.itemCount," ürün • ₺",n.total.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 text-gray-600 hover:text-red-500 transition-colors",children:e.jsx(R,{className:"w-5 h-5"})}),e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 text-gray-600 hover:text-blue-500 transition-colors",children:e.jsx(A,{className:"w-5 h-5"})})]})]})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsx(a.div,{className:"lg:col-span-2 space-y-4",variants:H,initial:"hidden",animate:"visible",children:e.jsx(S,{children:l.map(h=>e.jsx(a.div,{variants:q,children:e.jsx(D,{item:h,updateQuantity:x,removeItem:p,currentTheme:i})},h.id))})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6 sticky top-28",children:[e.jsx(X,{discountCode:o,setDiscountCode:m,discount:r,setDiscount:y,error:b,setError:t,currentTheme:i}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-6",style:{color:i.primary},children:"Sipariş Özeti"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{children:["Ara Toplam (",n.itemCount," ürün):"]}),e.jsxs("span",{children:["₺",n.subtotal.toFixed(2)]})]}),r.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["İndirim (",r.description,"):"]}),e.jsxs("span",{children:["-₺",n.discountAmount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Kargo:"]}),e.jsx("span",{children:n.shipping===0?"Ücretsiz":`₺${n.shipping.toFixed(2)}`})]}),n.shipping>0&&n.subtotal<500&&e.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-3 rounded-lg",children:["₺",(500-n.subtotal).toFixed(2)," daha ekleyin, kargo ücretsiz olsun!"]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between font-bold text-xl",children:[e.jsx("span",{children:"Toplam:"}),e.jsxs("span",{style:{color:i.primary},children:["₺",n.total.toFixed(2)]})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-6 text-center text-xs",children:[e.jsxs("div",{className:"flex flex-col items-center p-2",children:[e.jsx(O,{className:"w-5 h-5 text-green-500 mb-1"}),e.jsx("span",{className:"text-gray-600",children:"Güvenli"})]}),e.jsxs("div",{className:"flex flex-col items-center p-2",children:[e.jsx(w,{className:"w-5 h-5 text-blue-500 mb-1"}),e.jsx("span",{className:"text-gray-600",children:"Ödeme"})]}),e.jsxs("div",{className:"flex flex-col items-center p-2",children:[e.jsx(L,{className:"w-5 h-5 text-purple-500 mb-1"}),e.jsx("span",{className:"text-gray-600",children:"Hediye"})]})]}),e.jsxs(a.button,{onClick:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full mt-6 py-4 text-white font-bold rounded-2xl shadow-lg flex items-center justify-center gap-2 text-lg",style:{backgroundColor:i.primary},children:[e.jsx(w,{className:"w-5 h-5"}),"Güvenli Ödemeye Geç"]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-3",children:"256-bit SSL şifreleme ile güvenli ödeme"})]})]})]})})]})}export{W as default};
